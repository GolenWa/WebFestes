<!-- SIDEBAR COMPONENT -->
<div class="sidebar">
    <!-- CERCA AVANÇADA -->
    <div class="card">
        <div class="card-header">
            <i class="fas fa-search"></i>
            Cerca Avançada
            <button class="control-btn" id="advanced-search-toggle">
                <i class="fas fa-cog"></i>
            </button>
        </div>
        <div class="card-content">
            <input type="text" class="search-box" placeholder="Cerca per nom, lloc o tipus..." id="searchInput">
            
            <!-- Advanced Search Panel -->
            <div class="advanced-search-panel" id="advanced-search-panel" style="display: none;">
                <div class="search-filters">
                    <div class="filter-group">
                        <label>Data:</label>
                        <input type="date" id="dateFilter" class="filter-input">
                    </div>
                    <div class="filter-group">
                        <label>Comarca:</label>
                        <select id="comarcaFilter" class="filter-input">
                            <option value="">Totes les comarques</option>
                            <option value="barcelones">Barcelonès</option>
                            <option value="vallès">Vallès</option>
                            <option value="bages">Bages</option>
                            <!-- Més comarques... -->
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Tipus:</label>
                        <div class="filter-checkboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" value="cultural" checked> Cultural
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="gastronomic" checked> Gastronòmica
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="religious" checked> Religiosa
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="music" checked> Musical
                            </label>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-sm" onclick="applyAdvancedFilters()">
                        <i class="fas fa-filter"></i> Aplicar Filtres
                    </button>
                </div>
            </div>

            <div id="search-results" class="search-results"></div>
        </div>
    </div>

    <!-- BREADCRUMB -->
    <div class="card" id="breadcrumb-card" style="display: none;">
        <div class="card-content">
            <div class="breadcrumb" id="breadcrumb">
                <span class="breadcrumb-item" onclick="showCatalunya()">Catalunya</span>
            </div>
        </div>
    </div>

    <!-- TABS CONTAINER -->
    <div class="card">
        <div class="tabs-container">
            <div class="tabs-nav">
                <button class="tab-btn active" data-tab="calendar">
                    <i class="fas fa-calendar-alt"></i> Calendari
                </button>
                <button class="tab-btn" data-tab="events">
                    <i class="fas fa-star"></i> Esdeveniments
                </button>
                <button class="tab-btn" data-tab="favorites">
                    <i class="fas fa-heart"></i> Favorits
                </button>
            </div>

            <!-- CALENDAR TAB -->
            <div class="tab-content active" id="calendar-tab">
                <div class="card-header">
                    <span>Calendari - <span id="currentMonth">Juny 2025</span></span>
                    <div class="calendar-controls">
                        <button class="control-btn" onclick="changeMonth(-1)">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="control-btn" onclick="changeMonth(1)">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button class="control-btn" onclick="goToToday()" title="Avui">
                            <i class="fas fa-home"></i>
                        </button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Calendar days will be generated by JavaScript -->
                </div>
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-color today"></span> Avui
                    </div>
                    <div class="legend-item">
                        <span class="legend-color has-event"></span> Té esdeveniments
                    </div>
                </div>
            </div>

            <!-- EVENTS TAB -->
            <div class="tab-content" id="events-tab">
                <div class="card-header">
                    <span id="events-title">Esdeveniments</span>
                    <div class="events-controls">
                        <button class="control-btn" onclick="sortEvents('date')" title="Ordenar per data">
                            <i class="fas fa-sort-amount-down"></i>
                        </button>
                        <button class="control-btn" onclick="sortEvents('name')" title="Ordenar per nom">
                            <i class="fas fa-sort-alpha-down"></i>
                        </button>
                    </div>
                </div>
                <div class="events-list" id="eventsList">
                    <!-- Events will be populated by JavaScript -->
                </div>
                <div class="load-more-container">
                    <button class="btn btn-outline btn-sm" onclick="loadMoreEvents()">
                        <i class="fas fa-plus"></i> Carregar més
                    </button>
                </div>
            </div>

            <!-- FAVORITES TAB -->
            <div class="tab-content" id="favorites-tab">
                <div class="card-header">
                    <span>Els Meus Favorits</span>
                    <span class="badge" id="favorites-count">0</span>
                </div>
                <div class="favorites-list" id="favoritesList">
                    <div class="empty-state">
                        <i class="fas fa-heart-broken"></i>
                        <p>No tens cap festa marcada com a favorita</p>
                        <button class="btn btn-primary btn-sm" onclick="exploreEvents()">
                            Explorar Festes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- WEATHER WIDGET -->
    <div class="card">
        <div class="card-header">
            <i class="fas fa-cloud-sun"></i>
            Temps a Catalunya
        </div>
        <div class="card-content">
            <div class="weather-widget" id="weatherWidget">
                <div class="weather-location">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="weatherLocation">Barcelona</span>
                </div>
                <div class="weather-main">
                    <div class="weather-temp">
                        <span id="weatherTemp">24°</span>
                        <div class="weather-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                    </div>
                    <div class="weather-desc">
                        <span id="weatherDesc">Assolellat</span>
                    </div>
                </div>
                <div class="weather-details">
                    <div class="weather-detail">
                        <i class="fas fa-eye"></i>
                        <span>Visibilitat: <span id="weatherVisibility">10km</span></span>
                    </div>
                    <div class="weather-detail">
                        <i class="fas fa-wind"></i>
                        <span>Vent: <span id="weatherWind">15 km/h</span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ESTADÍSTIQUES MILLORADES -->
    <div class="card">
        <div class="card-header">
            <i class="fas fa-chart-pie"></i>
            Estadístiques
            <button class="control-btn" onclick="refreshStats()">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
        <div class="card-content">
            <div class="stats-grid">
                <div class="stat-item" onclick="filterByTotal()">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-number" id="totalEvents">156</div>
                    <div class="stat-label">Festes Total</div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up"></i> +12 aquest mes
                    </div>
                </div>
                <div class="stat-item" onclick="filterByMonth()">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="stat-number" id="thisMonth">24</div>
                    <div class="stat-label">Aquest Mes</div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up"></i> +3 setmana
                    </div>
                </div>
                <div class="stat-item" onclick="showPopularComarca()">
                    <div class="stat-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-number" id="popularComarca">Barcelonès</div>
                    <div class="stat-label">Comarca Popular</div>
                    <div class="stat-trend">
                        <i class="fas fa-star"></i> 45 festes
                    </div>
                </div>
                <div class="stat-item" onclick="showUpcoming()">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-number" id="upcomingEvents">8</div>
                    <div class="stat-label">Pròximes</div>
                    <div class="stat-trend">
                        <i class="fas fa-calendar-day"></i> 7 dies
                    </div>
                </div>
            </div>
            
            <!-- Progress Bars -->
            <div class="stats-progress">
                <div class="progress-item">
                    <div class="progress-label">
                        <span>Festes Culturals</span>
                        <span>65%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 65%"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>Festes Gastronòmiques</span>
                        <span>28%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 28%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- QUICK ACTIONS -->
    <div class="card">
        <div class="card-header">
            <i class="fas fa-bolt"></i>
            Accions Ràpides
        </div>
        <div class="card-content">
            <div class="quick-actions">
                <button class="action-btn" onclick="shareLocation()">
                    <i class="fas fa-share-alt"></i>
                    Compartir Ubicació
                </button>
                <button class="action-btn" onclick="exportCalendar()">
                    <i class="fas fa-download"></i>
                    Exportar Calendari
                </button>
                <button class="action-btn" onclick="reportIssue()">
                    <i class="fas fa-bug"></i>
                    Reportar Error
                </button>
            </div>
        </div>
    </div>
</div>